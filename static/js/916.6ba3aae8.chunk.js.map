{"version":3,"file":"static/js/916.6ba3aae8.chunk.js","mappings":"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","sources":["webpack://goit-react-hw-05-movies/./src/components/pages/Movies/Movies.module.css?078c","components/pages/Movies/Movies.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"MoviesBox\":\"Movies_MoviesBox__1kLkY\",\"form\":\"Movies_form__l38Cp\",\"input\":\"Movies_input__4OFGV\",\"btn\":\"Movies_btn__WXm3s\",\"link\":\"Movies_link__vmkGL\",\"item\":\"Movies_item__F6eNg\"};","import React, { useState, useCallback, useEffect } from 'react';\r\nimport styles from './Movies.module.css';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\n\r\nconst Movies = () => {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [movies, setMovies] = useState(() => {\r\n    // Load from sessionStorage when the component mounts\r\n    const storedMovies = sessionStorage.getItem('movies');\r\n    return storedMovies ? JSON.parse(storedMovies) : [];\r\n  });\r\n  const [api_key] = useState('6ec0ba8fa041ffdfd513a6b00a854a64');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  const fetchSearchResults = useCallback(async (newQuery) => {\r\n    const apiUrlSearch = `https://api.themoviedb.org/3/search/movie?query=${newQuery}&api_key=${api_key}`;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(apiUrlSearch);\r\n      const json = await response.json();\r\n\r\n      if (response.ok) {\r\n        setMovies(json.results);\r\n        setError(null);\r\n\r\n        // Save to sessionStorage after fetching results\r\n        sessionStorage.setItem('movies', JSON.stringify(json.results));\r\n      } else {\r\n        setError('Failed to fetch search results');\r\n        setMovies([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching search results:', error);\r\n      setError('Failed to fetch search results');\r\n      setMovies([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [api_key]);\r\n\r\n  useEffect(() => {\r\n    // Load from sessionStorage when the component mounts\r\n    const storedMovies = sessionStorage.getItem('movies');\r\n    const queryParam = new URLSearchParams(window.location.search).get('query');\r\n\r\n    if (!queryParam) {\r\n      // Clear sessionStorage if there is no query parameter in the URL\r\n      sessionStorage.removeItem('movies');\r\n    } else if (storedMovies) {\r\n      setMovies(JSON.parse(storedMovies));\r\n    }\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setSearchQuery(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (searchQuery.trim() !== '') {\r\n      try {\r\n        localStorage.setItem('searchQuery', searchQuery);\r\n\r\n        await fetchSearchResults(searchQuery);\r\n        navigate(`/movies?query=${searchQuery}`);\r\n      } catch (error) {\r\n        console.error('Error during search:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.MoviesBox}>\r\n      <form className={styles.form} onSubmit={handleSubmit}>\r\n        <input\r\n          className={styles.input}\r\n          onChange={handleChange}\r\n          type=\"text\"\r\n          value={searchQuery}\r\n        />\r\n        <button className={styles.btn} type=\"submit\">\r\n          Search\r\n        </button>\r\n      </form>\r\n      {loading && <p>Loading...</p>}\r\n      {error && <p>Error: {error}</p>}\r\n      {movies.length > 0 && (\r\n        <ul className={styles.searchResults}>\r\n          {movies.map((movie) => (\r\n            <li className={styles.item} key={movie.id}>\r\n              {movie.original_title && (\r\n                <Link className={styles.link} to={`/movies/${movie.id}`}>\r\n                  {movie.original_title}\r\n                </Link>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Movies;"],"names":["_useState","useState","_useState2","_slicedToArray","searchQuery","setSearchQuery","_useState3","storedMovies","sessionStorage","getItem","JSON","parse","_useState4","movies","setMovies","_useState5","api_key","_useState7","_useState8","loading","setLoading","_useState9","_useState10","error","setError","navigate","useNavigate","fetchSearchResults","useCallback","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","newQuery","apiUrlSearch","response","json","_context","prev","next","concat","fetch","sent","ok","results","setItem","stringify","t0","console","finish","stop","_x","apply","arguments","useEffect","URLSearchParams","window","location","search","get","removeItem","handleSubmit","_ref2","_callee2","e","_context2","preventDefault","trim","localStorage","_x2","_jsxs","className","styles","children","onSubmit","_jsx","onChange","target","value","type","length","map","movie","original_title","Link","to","id"],"sourceRoot":""}