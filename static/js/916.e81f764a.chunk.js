"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[916],{916:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var s=r(861),n=r(439),a=r(757),i=r.n(a),o=r(791),c={MoviesBox:"Movies_MoviesBox__CiJTJ",form:"Movies_form__MWvXj",input:"Movies_input__aaq4I",btn:"Movies_btn__IoHne",link:"Movies_link__Ti9Y4",item:"Movies_item__3vDYm"},u=r(97),l=r(184),v=function(){var e=(0,o.useState)(""),t=(0,n.Z)(e,2),r=t[0],a=t[1],v=(0,o.useState)((function(){var e=sessionStorage.getItem("movies");return e?JSON.parse(e):[]})),f=(0,n.Z)(v,2),h=f[0],m=f[1],p=(0,o.useState)("6ec0ba8fa041ffdfd513a6b00a854a64"),_=(0,n.Z)(p,1)[0],d=(0,o.useState)(!1),x=(0,n.Z)(d,2),g=x[0],S=x[1],b=(0,o.useState)(null),k=(0,n.Z)(b,2),j=k[0],w=k[1],y=(0,u.s0)(),M=(0,o.useCallback)(function(){var e=(0,s.Z)(i().mark((function e(t){var r,s,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://api.themoviedb.org/3/search/movie?query=".concat(t,"&api_key=").concat(_),e.prev=1,S(!0),e.next=5,fetch(r);case 5:return s=e.sent,e.next=8,s.json();case 8:n=e.sent,s.ok?(m(n.results),w(null),sessionStorage.setItem("movies",JSON.stringify(n.results))):(w("Failed to fetch search results"),m([])),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Error fetching search results:",e.t0),w("Failed to fetch search results"),m([]);case 17:return e.prev=17,S(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,12,17,20]])})));return function(t){return e.apply(this,arguments)}}(),[_]);(0,o.useEffect)((function(){var e=sessionStorage.getItem("movies");new URLSearchParams(window.location.search).get("query")?e&&m(JSON.parse(e)):sessionStorage.removeItem("movies")}),[]);var N=function(){var e=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===r.trim()){e.next=12;break}return e.prev=2,localStorage.setItem("searchQuery",r),e.next=6,M(r);case 6:y("/movies?query=".concat(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error during search:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:c.MoviesBox,children:[(0,l.jsxs)("form",{className:c.form,onSubmit:N,children:[(0,l.jsx)("input",{className:c.input,onChange:function(e){a(e.target.value)},type:"text",value:r}),(0,l.jsx)("button",{className:c.btn,type:"submit",children:"Search"})]}),g&&(0,l.jsx)("p",{children:"Loading..."}),j&&(0,l.jsxs)("p",{children:["Error: ",j]}),h.length>0&&(0,l.jsx)("ul",{className:c.searchResults,children:h.map((function(e){return(0,l.jsx)("li",{className:c.item,children:e.original_title&&(0,l.jsx)(u.rU,{className:c.link,to:"/movies/".concat(e.id),children:e.original_title})},e.id)}))})]})}}}]);
//# sourceMappingURL=916.e81f764a.chunk.js.map