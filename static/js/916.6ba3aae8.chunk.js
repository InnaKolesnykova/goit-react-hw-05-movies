"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[916],{916:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var s=r(861),n=r(439),a=r(757),i=r.n(a),o=r(791),c={MoviesBox:"Movies_MoviesBox__1kLkY",form:"Movies_form__l38Cp",input:"Movies_input__4OFGV",btn:"Movies_btn__WXm3s",link:"Movies_link__vmkGL",item:"Movies_item__F6eNg"},u=r(97),l=r(184),v=function(){var e=(0,o.useState)(""),t=(0,n.Z)(e,2),r=t[0],a=t[1],v=(0,o.useState)((function(){var e=sessionStorage.getItem("movies");return e?JSON.parse(e):[]})),m=(0,n.Z)(v,2),f=m[0],h=m[1],p=(0,o.useState)("6ec0ba8fa041ffdfd513a6b00a854a64"),_=(0,n.Z)(p,1)[0],d=(0,o.useState)(!1),g=(0,n.Z)(d,2),x=g[0],k=g[1],S=(0,o.useState)(null),b=(0,n.Z)(S,2),w=b[0],N=b[1],j=(0,u.s0)(),y=(0,o.useCallback)(function(){var e=(0,s.Z)(i().mark((function e(t){var r,s,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://api.themoviedb.org/3/search/movie?query=".concat(t,"&api_key=").concat(_),e.prev=1,k(!0),e.next=5,fetch(r);case 5:return s=e.sent,e.next=8,s.json();case 8:n=e.sent,s.ok?(h(n.results),N(null),sessionStorage.setItem("movies",JSON.stringify(n.results))):(N("Failed to fetch search results"),h([])),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Error fetching search results:",e.t0),N("Failed to fetch search results"),h([]);case 17:return e.prev=17,k(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,12,17,20]])})));return function(t){return e.apply(this,arguments)}}(),[_]);(0,o.useEffect)((function(){var e=sessionStorage.getItem("movies");new URLSearchParams(window.location.search).get("query")?e&&h(JSON.parse(e)):sessionStorage.removeItem("movies")}),[]);var M=function(){var e=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===r.trim()){e.next=12;break}return e.prev=2,localStorage.setItem("searchQuery",r),e.next=6,y(r);case 6:j("/movies?query=".concat(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error during search:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:c.MoviesBox,children:[(0,l.jsxs)("form",{className:c.form,onSubmit:M,children:[(0,l.jsx)("input",{className:c.input,onChange:function(e){a(e.target.value)},type:"text",value:r}),(0,l.jsx)("button",{className:c.btn,type:"submit",children:"Search"})]}),x&&(0,l.jsx)("p",{children:"Loading..."}),w&&(0,l.jsxs)("p",{children:["Error: ",w]}),f.length>0&&(0,l.jsx)("ul",{className:c.searchResults,children:f.map((function(e){return(0,l.jsx)("li",{className:c.item,children:e.original_title&&(0,l.jsx)(u.rU,{className:c.link,to:"/movies/".concat(e.id),children:e.original_title})},e.id)}))})]})}}}]);
//# sourceMappingURL=916.6ba3aae8.chunk.js.map