{"version":3,"file":"static/js/916.e81f764a.chunk.js","mappings":"oOACA,GAAgB,UAAY,0BAA0B,KAAO,qBAAqB,MAAQ,sBAAsB,IAAM,oBAAoB,KAAO,qBAAqB,KAAO,sB,iBCyG7K,EAtGe,WACb,IAAAA,GAAsCC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA3CI,EAAWF,EAAA,GAAEG,EAAcH,EAAA,GAClCI,GAA4BL,EAAAA,EAAAA,WAAS,WAEnC,IAAMM,EAAeC,eAAeC,QAAQ,UAC5C,OAAOF,EAAeG,KAAKC,MAAMJ,GAAgB,EACnD,IAAEK,GAAAT,EAAAA,EAAAA,GAAAG,EAAA,GAJKO,EAAMD,EAAA,GAAEE,EAASF,EAAA,GAKxBG,GAAkBd,EAAAA,EAAAA,UAAS,oCAApBe,GAAuDb,EAAAA,EAAAA,GAAAY,EAAA,GAAhD,GACdE,GAA8BhB,EAAAA,EAAAA,WAAS,GAAMiB,GAAAf,EAAAA,EAAAA,GAAAc,EAAA,GAAtCE,EAAOD,EAAA,GAAEE,EAAUF,EAAA,GAC1BG,GAA0BpB,EAAAA,EAAAA,UAAS,MAAKqB,GAAAnB,EAAAA,EAAAA,GAAAkB,EAAA,GAAjCE,EAAKD,EAAA,GAAEE,EAAQF,EAAA,GAChBG,GAAWC,EAAAA,EAAAA,MAEXC,GAAqBC,EAAAA,EAAAA,aAAW,eAAAC,GAAAC,EAAAA,EAAAA,GAAAC,IAAAA,MAAC,SAAAC,EAAOC,GAAQ,IAAAC,EAAAC,EAAAC,EAAA,OAAAL,IAAAA,MAAA,SAAAM,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAIjC,OAHbL,EAAY,mDAAAM,OAAsDP,EAAQ,aAAAO,OAAYxB,GAAOqB,EAAAC,KAAA,EAGjGlB,GAAW,GAAMiB,EAAAE,KAAA,EACME,MAAMP,GAAc,KAAD,EAA5B,OAARC,EAAQE,EAAAK,KAAAL,EAAAE,KAAA,EACKJ,EAASC,OAAO,KAAD,EAA5BA,EAAIC,EAAAK,KAENP,EAASQ,IACX7B,EAAUsB,EAAKQ,SACfpB,EAAS,MAGThB,eAAeqC,QAAQ,SAAUnC,KAAKoC,UAAUV,EAAKQ,YAErDpB,EAAS,kCACTV,EAAU,KACXuB,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAU,GAAAV,EAAA,SAEDW,QAAQzB,MAAM,iCAAgCc,EAAAU,IAC9CvB,EAAS,kCACTV,EAAU,IAAI,QAEI,OAFJuB,EAAAC,KAAA,GAEdlB,GAAW,GAAOiB,EAAAY,OAAA,6BAAAZ,EAAAa,OAAA,GAAAlB,EAAA,yBAErB,gBAAAmB,GAAA,OAAAtB,EAAAuB,MAAA,KAAAC,UAAA,EAzBqC,GAyBnC,CAACrC,KAEJsC,EAAAA,EAAAA,YAAU,WAER,IAAM/C,EAAeC,eAAeC,QAAQ,UACzB,IAAI8C,gBAAgBC,OAAOC,SAASC,QAAQC,IAAI,SAKxDpD,GACTO,EAAUJ,KAAKC,MAAMJ,IAFrBC,eAAeoD,WAAW,SAI9B,GAAG,IAEH,IAIMC,EAAY,eAAAC,GAAAhC,EAAAA,EAAAA,GAAAC,IAAAA,MAAG,SAAAgC,EAAOC,GAAC,OAAAjC,IAAAA,MAAA,SAAAkC,GAAA,cAAAA,EAAA3B,KAAA2B,EAAA1B,MAAA,OACR,GAAnByB,EAAEE,iBACyB,KAAvB9D,EAAY+D,OAAa,CAAAF,EAAA1B,KAAA,SAEwB,OAFxB0B,EAAA3B,KAAA,EAEzB8B,aAAavB,QAAQ,cAAezC,GAAa6D,EAAA1B,KAAA,EAE3CZ,EAAmBvB,GAAa,KAAD,EACrCqB,EAAS,iBAADe,OAAkBpC,IAAe6D,EAAA1B,KAAA,gBAAA0B,EAAA3B,KAAA,EAAA2B,EAAAlB,GAAAkB,EAAA,SAEzCjB,QAAQzB,MAAM,uBAAsB0C,EAAAlB,IAAS,yBAAAkB,EAAAf,OAAA,GAAAa,EAAA,kBAGlD,gBAZiBM,GAAA,OAAAP,EAAAV,MAAA,KAAAC,UAAA,KAclB,OACEiB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAAA,UAAiBC,SAAA,EAC/BH,EAAAA,EAAAA,MAAA,QAAMC,UAAWC,EAAAA,KAAaE,SAAUb,EAAaY,SAAA,EACnDE,EAAAA,EAAAA,KAAA,SACEJ,UAAWC,EAAAA,MACXI,SAvBa,SAACZ,GACpB3D,EAAe2D,EAAEa,OAAOC,MAC1B,EAsBQC,KAAK,OACLD,MAAO1E,KAETuE,EAAAA,EAAAA,KAAA,UAAQJ,UAAWC,EAAAA,IAAYO,KAAK,SAAQN,SAAC,cAI9CtD,IAAWwD,EAAAA,EAAAA,KAAA,KAAAF,SAAG,eACdlD,IAAS+C,EAAAA,EAAAA,MAAA,KAAAG,SAAA,CAAG,UAAQlD,KACpBV,EAAOmE,OAAS,IACfL,EAAAA,EAAAA,KAAA,MAAIJ,UAAWC,EAAAA,cAAqBC,SACjC5D,EAAOoE,KAAI,SAACC,GAAK,OAChBP,EAAAA,EAAAA,KAAA,MAAIJ,UAAWC,EAAAA,KAAYC,SACxBS,EAAMC,iBACLR,EAAAA,EAAAA,KAACS,EAAAA,GAAI,CAACb,UAAWC,EAAAA,KAAaa,GAAE,WAAA7C,OAAa0C,EAAMI,IAAKb,SACrDS,EAAMC,kBAHoBD,EAAMI,GAMlC,QAMjB,C","sources":["webpack://goit-react-hw-05-movies/./src/components/pages/Movies/Movies.module.css?078c","components/pages/Movies/Movies.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"MoviesBox\":\"Movies_MoviesBox__CiJTJ\",\"form\":\"Movies_form__MWvXj\",\"input\":\"Movies_input__aaq4I\",\"btn\":\"Movies_btn__IoHne\",\"link\":\"Movies_link__Ti9Y4\",\"item\":\"Movies_item__3vDYm\"};","import React, { useState, useCallback, useEffect } from 'react';\nimport styles from './Movies.module.css';\nimport { Link, useNavigate } from 'react-router-dom';\n\nconst Movies = () => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [movies, setMovies] = useState(() => {\n    // Load from sessionStorage when the component mounts\n    const storedMovies = sessionStorage.getItem('movies');\n    return storedMovies ? JSON.parse(storedMovies) : [];\n  });\n  const [api_key] = useState('6ec0ba8fa041ffdfd513a6b00a854a64');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n\n  const fetchSearchResults = useCallback(async (newQuery) => {\n    const apiUrlSearch = `https://api.themoviedb.org/3/search/movie?query=${newQuery}&api_key=${api_key}`;\n\n    try {\n      setLoading(true);\n      const response = await fetch(apiUrlSearch);\n      const json = await response.json();\n\n      if (response.ok) {\n        setMovies(json.results);\n        setError(null);\n\n        // Save to sessionStorage after fetching results\n        sessionStorage.setItem('movies', JSON.stringify(json.results));\n      } else {\n        setError('Failed to fetch search results');\n        setMovies([]);\n      }\n    } catch (error) {\n      console.error('Error fetching search results:', error);\n      setError('Failed to fetch search results');\n      setMovies([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [api_key]);\n\n  useEffect(() => {\n    // Load from sessionStorage when the component mounts\n    const storedMovies = sessionStorage.getItem('movies');\n    const queryParam = new URLSearchParams(window.location.search).get('query');\n\n    if (!queryParam) {\n      // Clear sessionStorage if there is no query parameter in the URL\n      sessionStorage.removeItem('movies');\n    } else if (storedMovies) {\n      setMovies(JSON.parse(storedMovies));\n    }\n  }, []);\n\n  const handleChange = (e) => {\n    setSearchQuery(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (searchQuery.trim() !== '') {\n      try {\n        localStorage.setItem('searchQuery', searchQuery);\n\n        await fetchSearchResults(searchQuery);\n        navigate(`/movies?query=${searchQuery}`);\n      } catch (error) {\n        console.error('Error during search:', error);\n      }\n    }\n  };\n\n  return (\n    <div className={styles.MoviesBox}>\n      <form className={styles.form} onSubmit={handleSubmit}>\n        <input\n          className={styles.input}\n          onChange={handleChange}\n          type=\"text\"\n          value={searchQuery}\n        />\n        <button className={styles.btn} type=\"submit\">\n          Search\n        </button>\n      </form>\n      {loading && <p>Loading...</p>}\n      {error && <p>Error: {error}</p>}\n      {movies.length > 0 && (\n        <ul className={styles.searchResults}>\n          {movies.map((movie) => (\n            <li className={styles.item} key={movie.id}>\n              {movie.original_title && (\n                <Link className={styles.link} to={`/movies/${movie.id}`}>\n                  {movie.original_title}\n                </Link>\n              )}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default Movies;"],"names":["_useState","useState","_useState2","_slicedToArray","searchQuery","setSearchQuery","_useState3","storedMovies","sessionStorage","getItem","JSON","parse","_useState4","movies","setMovies","_useState5","api_key","_useState7","_useState8","loading","setLoading","_useState9","_useState10","error","setError","navigate","useNavigate","fetchSearchResults","useCallback","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","newQuery","apiUrlSearch","response","json","_context","prev","next","concat","fetch","sent","ok","results","setItem","stringify","t0","console","finish","stop","_x","apply","arguments","useEffect","URLSearchParams","window","location","search","get","removeItem","handleSubmit","_ref2","_callee2","e","_context2","preventDefault","trim","localStorage","_x2","_jsxs","className","styles","children","onSubmit","_jsx","onChange","target","value","type","length","map","movie","original_title","Link","to","id"],"sourceRoot":""}